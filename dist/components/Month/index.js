"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _react = _interopRequireWildcard(require("react"));
var _utils = require("../../utils");
var _DayCell = _interopRequireDefault(require("../DayCell"));
var _dateFns = require("date-fns");
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
function _getRequireWildcardCache(e) { if ("function" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function (e) { return e ? t : r; })(e); }
function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || "object" != typeof e && "function" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if ("default" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }
var _default = exports.default = /*#__PURE__*/(0, _react.memo)(function Month(_ref) {
  let {
    style,
    styles,
    month,
    drag,
    dateOptions,
    disabledDates,
    disabledDay,
    preview,
    showPreview,
    date,
    displayMode,
    minDate,
    maxDate,
    ranges,
    color,
    focusedRange,
    onDragSelectionStart,
    onDragSelectionEnd,
    onDragSelectionMove,
    onMouseLeave,
    onPreviewChange,
    monthDisplayFormat,
    weekdayDisplayFormat,
    dayDisplayFormat,
    showWeekDays,
    showMonthName,
    fixedHeight,
    dayContentRenderer
  } = _ref;
  const now = new Date();
  const minDateInternal = minDate && (0, _dateFns.startOfDay)(minDate);
  const maxDateInternal = maxDate && (0, _dateFns.endOfDay)(maxDate);
  const monthDisplay = (0, _utils.getMonthDisplayRange)(month, dateOptions, fixedHeight);
  let rangesInternal = ranges;
  if (displayMode == 'dateRange' && drag.status) {
    const {
      startDate,
      endDate
    } = drag.range;
    rangesInternal = rangesInternal.map((range, i) => {
      if (i !== focusedRange[0]) return range;
      return {
        ...range,
        startDate,
        endDate
      };
    });
  }
  const showPreviewInternal = showPreview && !drag.disablePreview;
  return /*#__PURE__*/_react.default.createElement("div", {
    className: styles.month,
    style: style
  }, showMonthName ? /*#__PURE__*/_react.default.createElement("div", {
    className: styles.monthName
  }, (0, _dateFns.format)(month, monthDisplayFormat, dateOptions)) : null, showWeekDays ? /*#__PURE__*/_react.default.createElement(Weekdays, {
    styles: styles,
    dateOptions: dateOptions,
    weekdayDisplayFormat: weekdayDisplayFormat
  }) : null, /*#__PURE__*/_react.default.createElement("div", {
    className: styles.days,
    onMouseLeave: onMouseLeave
  }, (0, _dateFns.eachDayOfInterval)({
    start: monthDisplay.start,
    end: monthDisplay.end
  }).map((day, index) => {
    const isStartOfMonth = (0, _dateFns.isSameDay)(day, monthDisplay.startDateOfMonth);
    const isEndOfMonth = (0, _dateFns.isSameDay)(day, monthDisplay.endDateOfMonth);
    const isOutsideMinMax = minDateInternal && (0, _dateFns.isBefore)(day, minDateInternal) || maxDateInternal && (0, _dateFns.isAfter)(day, maxDateInternal);
    const isDisabledSpecifically = disabledDates.some(disabledDate => (0, _dateFns.isSameDay)(disabledDate, day));
    const isDisabledDay = disabledDay(day);
    return /*#__PURE__*/_react.default.createElement(_DayCell.default, {
      date: date,
      dayContentRenderer: dayContentRenderer,
      key: index,
      onPreviewChange: onPreviewChange,
      displayMode: displayMode,
      color: color,
      dayDisplayFormat: dayDisplayFormat,
      ranges: rangesInternal,
      day: day,
      preview: showPreviewInternal ? preview : null,
      isWeekend: (0, _dateFns.isWeekend)(day),
      isToday: (0, _dateFns.isSameDay)(day, now),
      isStartOfWeek: (0, _dateFns.isSameDay)(day, (0, _dateFns.startOfWeek)(day, dateOptions)),
      isEndOfWeek: (0, _dateFns.isSameDay)(day, (0, _dateFns.endOfWeek)(day, dateOptions)),
      isStartOfMonth: isStartOfMonth,
      isEndOfMonth: isEndOfMonth,
      disabled: isOutsideMinMax || isDisabledSpecifically || isDisabledDay,
      isPassive: !(0, _dateFns.isWithinInterval)(day, {
        start: monthDisplay.startDateOfMonth,
        end: monthDisplay.endDateOfMonth
      }),
      styles: styles,
      onMouseDown: onDragSelectionStart,
      onMouseUp: onDragSelectionEnd,
      onMouseEnter: onDragSelectionMove
    });
  })));
});
function Weekdays(_ref2) {
  let {
    styles,
    dateOptions,
    weekdayDisplayFormat
  } = _ref2;
  const now = new Date();
  return /*#__PURE__*/_react.default.createElement("div", {
    className: styles.weekDays
  }, (0, _dateFns.eachDayOfInterval)({
    start: (0, _dateFns.startOfWeek)(now, dateOptions),
    end: (0, _dateFns.endOfWeek)(now, dateOptions)
  }).map((day, i) => {
    return /*#__PURE__*/_react.default.createElement("span", {
      className: styles.weekDay,
      key: i
    }, (0, _dateFns.format)(day, weekdayDisplayFormat, dateOptions));
  }));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfdXRpbHMiLCJfRGF5Q2VsbCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfZGF0ZUZucyIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlIiwiZSIsIldlYWtNYXAiLCJyIiwidCIsImhhcyIsImdldCIsIm4iLCJfX3Byb3RvX18iLCJhIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJ1IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaSIsInNldCIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsIm1lbW8iLCJNb250aCIsIl9yZWYiLCJzdHlsZSIsInN0eWxlcyIsIm1vbnRoIiwiZHJhZyIsImRhdGVPcHRpb25zIiwiZGlzYWJsZWREYXRlcyIsImRpc2FibGVkRGF5IiwicHJldmlldyIsInNob3dQcmV2aWV3IiwiZGF0ZSIsImRpc3BsYXlNb2RlIiwibWluRGF0ZSIsIm1heERhdGUiLCJyYW5nZXMiLCJjb2xvciIsImZvY3VzZWRSYW5nZSIsIm9uRHJhZ1NlbGVjdGlvblN0YXJ0Iiwib25EcmFnU2VsZWN0aW9uRW5kIiwib25EcmFnU2VsZWN0aW9uTW92ZSIsIm9uTW91c2VMZWF2ZSIsIm9uUHJldmlld0NoYW5nZSIsIm1vbnRoRGlzcGxheUZvcm1hdCIsIndlZWtkYXlEaXNwbGF5Rm9ybWF0IiwiZGF5RGlzcGxheUZvcm1hdCIsInNob3dXZWVrRGF5cyIsInNob3dNb250aE5hbWUiLCJmaXhlZEhlaWdodCIsImRheUNvbnRlbnRSZW5kZXJlciIsIm5vdyIsIkRhdGUiLCJtaW5EYXRlSW50ZXJuYWwiLCJzdGFydE9mRGF5IiwibWF4RGF0ZUludGVybmFsIiwiZW5kT2ZEYXkiLCJtb250aERpc3BsYXkiLCJnZXRNb250aERpc3BsYXlSYW5nZSIsInJhbmdlc0ludGVybmFsIiwic3RhdHVzIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsInJhbmdlIiwibWFwIiwic2hvd1ByZXZpZXdJbnRlcm5hbCIsImRpc2FibGVQcmV2aWV3IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsIm1vbnRoTmFtZSIsImZvcm1hdCIsIldlZWtkYXlzIiwiZGF5cyIsImVhY2hEYXlPZkludGVydmFsIiwic3RhcnQiLCJlbmQiLCJkYXkiLCJpbmRleCIsImlzU3RhcnRPZk1vbnRoIiwiaXNTYW1lRGF5Iiwic3RhcnREYXRlT2ZNb250aCIsImlzRW5kT2ZNb250aCIsImVuZERhdGVPZk1vbnRoIiwiaXNPdXRzaWRlTWluTWF4IiwiaXNCZWZvcmUiLCJpc0FmdGVyIiwiaXNEaXNhYmxlZFNwZWNpZmljYWxseSIsInNvbWUiLCJkaXNhYmxlZERhdGUiLCJpc0Rpc2FibGVkRGF5Iiwia2V5IiwiaXNXZWVrZW5kIiwiaXNUb2RheSIsImlzU3RhcnRPZldlZWsiLCJzdGFydE9mV2VlayIsImlzRW5kT2ZXZWVrIiwiZW5kT2ZXZWVrIiwiZGlzYWJsZWQiLCJpc1Bhc3NpdmUiLCJpc1dpdGhpbkludGVydmFsIiwib25Nb3VzZURvd24iLCJvbk1vdXNlVXAiLCJvbk1vdXNlRW50ZXIiLCJfcmVmMiIsIndlZWtEYXlzIiwid2Vla0RheSJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL01vbnRoL2luZGV4LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgQ1NTUHJvcGVydGllcywgTW91c2VFdmVudCwgbWVtbyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGdldE1vbnRoRGlzcGxheVJhbmdlIH0gZnJvbSAnLi4vLi4vdXRpbHMnO1xuaW1wb3J0IHsgU3R5bGVzVHlwZSB9IGZyb20gJy4uLy4uL3N0eWxlcyc7XG5pbXBvcnQgRGF5Q2VsbCwgeyBEYXlDZWxsUHJvcHMsIERhdGVSYW5nZSB9IGZyb20gJy4uL0RheUNlbGwnO1xuaW1wb3J0IHsgRm9ybWF0T3B0aW9ucywgZWFjaERheU9mSW50ZXJ2YWwsIGVuZE9mRGF5LCBlbmRPZldlZWssIGZvcm1hdCwgaXNBZnRlciwgaXNCZWZvcmUsIGlzU2FtZURheSwgaXNXZWVrZW5kLCBpc1dpdGhpbkludGVydmFsLCBzdGFydE9mRGF5LCBzdGFydE9mV2VlayB9IGZyb20gJ2RhdGUtZm5zJztcblxudHlwZSBNb250aFByb3BzID0ge1xuICBzdHlsZTogQ1NTUHJvcGVydGllcyxcbiAgc3R5bGVzOiBTdHlsZXNUeXBlLFxuICBtb250aDogRGF0ZSxcbiAgZHJhZzoge1xuICAgIHJhbmdlOiBEYXRlUmFuZ2UsXG4gICAgZGlzYWJsZVByZXZpZXc6IGJvb2xlYW4sXG4gICAgc3RhdHVzOiBib29sZWFuXG4gIH0sXG4gIGRhdGVPcHRpb25zOiBGb3JtYXRPcHRpb25zLFxuICBkaXNhYmxlZERhdGVzPzogRGF0ZVtdLFxuICBkYXRlPzogRGF0ZSxcbiAgZGlzYWJsZWREYXk/OiAoZGF0ZTogRGF0ZSkgPT4gYm9vbGVhbixcbiAgcHJldmlldz86IHtcbiAgICBzdGFydERhdGU6IERhdGUsXG4gICAgZW5kRGF0ZTogRGF0ZVxuICB9LFxuICBzaG93UHJldmlldz86IGJvb2xlYW4sXG4gIGRpc3BsYXlNb2RlOiBcImRhdGVSYW5nZVwiIHwgXCJkYXRlXCIsXG4gIG1pbkRhdGU/OiBEYXRlLFxuICBtYXhEYXRlPzogRGF0ZSxcbiAgcmFuZ2VzPzogRGF5Q2VsbFByb3BzW1wicmFuZ2VzXCJdLFxuICBmb2N1c2VkUmFuZ2U/OiBudW1iZXJbXSxcbiAgY29sb3I/OiBzdHJpbmcsXG4gIG9uUHJldmlld0NoYW5nZT86IChkYXRlPzogRGF0ZSkgPT4gdm9pZCxcbiAgb25EcmFnU2VsZWN0aW9uU3RhcnQ/OiAoZGF0ZTogRGF0ZSkgPT4gdm9pZCxcbiAgb25EcmFnU2VsZWN0aW9uRW5kPzogKGRhdGU6IERhdGUpID0+IHZvaWQsXG4gIG9uRHJhZ1NlbGVjdGlvbk1vdmU/OiAoZGF0ZTogRGF0ZSkgPT4gdm9pZCxcbiAgb25Nb3VzZUxlYXZlPzogKGV2ZW50OiBNb3VzZUV2ZW50PEhUTUxEaXZFbGVtZW50PikgPT4gdm9pZCxcbiAgbW9udGhEaXNwbGF5Rm9ybWF0OiBzdHJpbmcsXG4gIHdlZWtkYXlEaXNwbGF5Rm9ybWF0OiBzdHJpbmcsXG4gIGRheURpc3BsYXlGb3JtYXQ6IHN0cmluZyxcbiAgc2hvd1dlZWtEYXlzPzogYm9vbGVhbixcbiAgc2hvd01vbnRoTmFtZT86IGJvb2xlYW4sXG4gIGZpeGVkSGVpZ2h0PzogYm9vbGVhbixcbiAgZGF5Q29udGVudFJlbmRlcmVyPzogKGRhdGU6IERhdGUpID0+IFJlYWN0LlJlYWN0RWxlbWVudFxufTtcblxuZXhwb3J0IGRlZmF1bHQgbWVtbyhmdW5jdGlvbiBNb250aCh7XG4gIHN0eWxlLFxuICBzdHlsZXMsXG4gIG1vbnRoLFxuICBkcmFnLFxuICBkYXRlT3B0aW9ucyxcbiAgZGlzYWJsZWREYXRlcyxcbiAgZGlzYWJsZWREYXksXG4gIHByZXZpZXcsXG4gIHNob3dQcmV2aWV3LFxuICBkYXRlLFxuICBkaXNwbGF5TW9kZSxcbiAgbWluRGF0ZSxcbiAgbWF4RGF0ZSxcbiAgcmFuZ2VzLFxuICBjb2xvcixcbiAgZm9jdXNlZFJhbmdlLFxuICBvbkRyYWdTZWxlY3Rpb25TdGFydCxcbiAgb25EcmFnU2VsZWN0aW9uRW5kLFxuICBvbkRyYWdTZWxlY3Rpb25Nb3ZlLFxuICBvbk1vdXNlTGVhdmUsXG4gIG9uUHJldmlld0NoYW5nZSxcbiAgbW9udGhEaXNwbGF5Rm9ybWF0LFxuICB3ZWVrZGF5RGlzcGxheUZvcm1hdCxcbiAgZGF5RGlzcGxheUZvcm1hdCxcbiAgc2hvd1dlZWtEYXlzLFxuICBzaG93TW9udGhOYW1lLFxuICBmaXhlZEhlaWdodCxcbiAgZGF5Q29udGVudFJlbmRlcmVyXG59OiBNb250aFByb3BzKSB7XG5cbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcblxuICBjb25zdCBtaW5EYXRlSW50ZXJuYWwgPSBtaW5EYXRlICYmIHN0YXJ0T2ZEYXkobWluRGF0ZSk7XG4gIGNvbnN0IG1heERhdGVJbnRlcm5hbCA9IG1heERhdGUgJiYgZW5kT2ZEYXkobWF4RGF0ZSk7XG5cbiAgY29uc3QgbW9udGhEaXNwbGF5ID0gZ2V0TW9udGhEaXNwbGF5UmFuZ2UobW9udGgsIGRhdGVPcHRpb25zLCBmaXhlZEhlaWdodCk7XG5cbiAgbGV0IHJhbmdlc0ludGVybmFsID0gcmFuZ2VzO1xuXG4gIGlmIChkaXNwbGF5TW9kZSA9PSAnZGF0ZVJhbmdlJyAmJiBkcmFnLnN0YXR1cykge1xuICAgIGNvbnN0IHsgc3RhcnREYXRlLCBlbmREYXRlIH0gPSBkcmFnLnJhbmdlO1xuXG4gICAgcmFuZ2VzSW50ZXJuYWwgPSByYW5nZXNJbnRlcm5hbC5tYXAoKHJhbmdlLCBpKSA9PiB7XG4gICAgICBpZiAoaSAhPT0gZm9jdXNlZFJhbmdlWzBdKSByZXR1cm4gcmFuZ2U7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5yYW5nZSxcbiAgICAgICAgc3RhcnREYXRlLFxuICAgICAgICBlbmREYXRlLFxuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGNvbnN0IHNob3dQcmV2aWV3SW50ZXJuYWwgPSBzaG93UHJldmlldyAmJiAhZHJhZy5kaXNhYmxlUHJldmlldztcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMubW9udGh9IHN0eWxlPXtzdHlsZX0+XG4gICAgICB7XG4gICAgICAgIHNob3dNb250aE5hbWUgPyA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLm1vbnRoTmFtZX0+e2Zvcm1hdChtb250aCwgbW9udGhEaXNwbGF5Rm9ybWF0LCBkYXRlT3B0aW9ucyl9PC9kaXY+IDogbnVsbFxuICAgICAgfVxuICAgICAge1xuICAgICAgICBzaG93V2Vla0RheXMgPyA8V2Vla2RheXMgc3R5bGVzPXtzdHlsZXN9IGRhdGVPcHRpb25zPXtkYXRlT3B0aW9uc30gd2Vla2RheURpc3BsYXlGb3JtYXQ9e3dlZWtkYXlEaXNwbGF5Rm9ybWF0fSAvPiA6IG51bGxcbiAgICAgIH1cbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuZGF5c30gb25Nb3VzZUxlYXZlPXtvbk1vdXNlTGVhdmV9PlxuICAgICAgICB7XG4gICAgICAgICAgZWFjaERheU9mSW50ZXJ2YWwoeyBzdGFydDogbW9udGhEaXNwbGF5LnN0YXJ0LCBlbmQ6IG1vbnRoRGlzcGxheS5lbmQgfSkubWFwKChkYXk6IERhdGUsIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlzU3RhcnRPZk1vbnRoID0gaXNTYW1lRGF5KGRheSwgbW9udGhEaXNwbGF5LnN0YXJ0RGF0ZU9mTW9udGgpO1xuICAgICAgICAgICAgY29uc3QgaXNFbmRPZk1vbnRoID0gaXNTYW1lRGF5KGRheSwgbW9udGhEaXNwbGF5LmVuZERhdGVPZk1vbnRoKTtcbiAgICAgICAgICAgIGNvbnN0IGlzT3V0c2lkZU1pbk1heCA9IChtaW5EYXRlSW50ZXJuYWwgJiYgaXNCZWZvcmUoZGF5LCBtaW5EYXRlSW50ZXJuYWwpKSB8fCAobWF4RGF0ZUludGVybmFsICYmIGlzQWZ0ZXIoZGF5LCBtYXhEYXRlSW50ZXJuYWwpKTtcbiAgICAgICAgICAgIGNvbnN0IGlzRGlzYWJsZWRTcGVjaWZpY2FsbHkgPSBkaXNhYmxlZERhdGVzLnNvbWUoZGlzYWJsZWREYXRlID0+XG4gICAgICAgICAgICAgIGlzU2FtZURheShkaXNhYmxlZERhdGUsIGRheSlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IGlzRGlzYWJsZWREYXkgPSBkaXNhYmxlZERheShkYXkpO1xuXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8RGF5Q2VsbFxuICAgICAgICAgICAgICAgIGRhdGU9e2RhdGV9XG4gICAgICAgICAgICAgICAgZGF5Q29udGVudFJlbmRlcmVyPXtkYXlDb250ZW50UmVuZGVyZXJ9XG4gICAgICAgICAgICAgICAga2V5PXtpbmRleH1cbiAgICAgICAgICAgICAgICBvblByZXZpZXdDaGFuZ2U9e29uUHJldmlld0NoYW5nZX1cbiAgICAgICAgICAgICAgICBkaXNwbGF5TW9kZT17ZGlzcGxheU1vZGV9XG4gICAgICAgICAgICAgICAgY29sb3I9e2NvbG9yfVxuICAgICAgICAgICAgICAgIGRheURpc3BsYXlGb3JtYXQ9e2RheURpc3BsYXlGb3JtYXR9XG4gICAgICAgICAgICAgICAgcmFuZ2VzPXtyYW5nZXNJbnRlcm5hbH1cbiAgICAgICAgICAgICAgICBkYXk9e2RheX1cbiAgICAgICAgICAgICAgICBwcmV2aWV3PXtzaG93UHJldmlld0ludGVybmFsID8gcHJldmlldyA6IG51bGx9XG4gICAgICAgICAgICAgICAgaXNXZWVrZW5kPXtpc1dlZWtlbmQoZGF5KX1cbiAgICAgICAgICAgICAgICBpc1RvZGF5PXtpc1NhbWVEYXkoZGF5LCBub3cpfVxuICAgICAgICAgICAgICAgIGlzU3RhcnRPZldlZWs9e2lzU2FtZURheShkYXksIHN0YXJ0T2ZXZWVrKGRheSwgZGF0ZU9wdGlvbnMpKX1cbiAgICAgICAgICAgICAgICBpc0VuZE9mV2Vlaz17aXNTYW1lRGF5KGRheSwgZW5kT2ZXZWVrKGRheSwgZGF0ZU9wdGlvbnMpKX1cbiAgICAgICAgICAgICAgICBpc1N0YXJ0T2ZNb250aD17aXNTdGFydE9mTW9udGh9XG4gICAgICAgICAgICAgICAgaXNFbmRPZk1vbnRoPXtpc0VuZE9mTW9udGh9XG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzT3V0c2lkZU1pbk1heCB8fCBpc0Rpc2FibGVkU3BlY2lmaWNhbGx5IHx8IGlzRGlzYWJsZWREYXl9XG4gICAgICAgICAgICAgICAgaXNQYXNzaXZlPXtcbiAgICAgICAgICAgICAgICAgICFpc1dpdGhpbkludGVydmFsKGRheSwge1xuICAgICAgICAgICAgICAgICAgICBzdGFydDogbW9udGhEaXNwbGF5LnN0YXJ0RGF0ZU9mTW9udGgsXG4gICAgICAgICAgICAgICAgICAgIGVuZDogbW9udGhEaXNwbGF5LmVuZERhdGVPZk1vbnRoLFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3R5bGVzPXtzdHlsZXN9XG4gICAgICAgICAgICAgICAgb25Nb3VzZURvd249e29uRHJhZ1NlbGVjdGlvblN0YXJ0fVxuICAgICAgICAgICAgICAgIG9uTW91c2VVcD17b25EcmFnU2VsZWN0aW9uRW5kfVxuICAgICAgICAgICAgICAgIG9uTW91c2VFbnRlcj17b25EcmFnU2VsZWN0aW9uTW92ZX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIClcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKVxuXG59KTtcblxudHlwZSBXZWVrZGF5c1Byb3BzID0ge1xuICBzdHlsZXM6IFN0eWxlc1R5cGUsXG4gIGRhdGVPcHRpb25zOiBGb3JtYXRPcHRpb25zLFxuICB3ZWVrZGF5RGlzcGxheUZvcm1hdDogc3RyaW5nXG59O1xuXG5mdW5jdGlvbiBXZWVrZGF5cyh7XG4gIHN0eWxlcyxcbiAgZGF0ZU9wdGlvbnMsXG4gIHdlZWtkYXlEaXNwbGF5Rm9ybWF0XG59OiBXZWVrZGF5c1Byb3BzKSB7XG5cbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMud2Vla0RheXN9PlxuICAgICAge1xuICAgICAgICBlYWNoRGF5T2ZJbnRlcnZhbCh7XG4gICAgICAgICAgc3RhcnQ6IHN0YXJ0T2ZXZWVrKG5vdywgZGF0ZU9wdGlvbnMpLFxuICAgICAgICAgIGVuZDogZW5kT2ZXZWVrKG5vdywgZGF0ZU9wdGlvbnMpXG4gICAgICAgIH0pLm1hcCgoZGF5OiBEYXRlLCBpOiBudW1iZXIpID0+IHtcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtzdHlsZXMud2Vla0RheX0ga2V5PXtpfT57Zm9ybWF0KGRheSwgd2Vla2RheURpc3BsYXlGb3JtYXQsIGRhdGVPcHRpb25zKX08L3NwYW4+XG4gICAgICAgICAgKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIDwvZGl2PlxuICApXG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxNQUFBLEdBQUFDLHVCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxNQUFBLEdBQUFELE9BQUE7QUFFQSxJQUFBRSxRQUFBLEdBQUFDLHNCQUFBLENBQUFILE9BQUE7QUFDQSxJQUFBSSxRQUFBLEdBQUFKLE9BQUE7QUFBNkssU0FBQUcsdUJBQUFFLEdBQUEsV0FBQUEsR0FBQSxJQUFBQSxHQUFBLENBQUFDLFVBQUEsR0FBQUQsR0FBQSxLQUFBRSxPQUFBLEVBQUFGLEdBQUE7QUFBQSxTQUFBRyx5QkFBQUMsQ0FBQSw2QkFBQUMsT0FBQSxtQkFBQUMsQ0FBQSxPQUFBRCxPQUFBLElBQUFFLENBQUEsT0FBQUYsT0FBQSxZQUFBRix3QkFBQSxZQUFBQSxDQUFBQyxDQUFBLFdBQUFBLENBQUEsR0FBQUcsQ0FBQSxHQUFBRCxDQUFBLEtBQUFGLENBQUE7QUFBQSxTQUFBVix3QkFBQVUsQ0FBQSxFQUFBRSxDQUFBLFNBQUFBLENBQUEsSUFBQUYsQ0FBQSxJQUFBQSxDQUFBLENBQUFILFVBQUEsU0FBQUcsQ0FBQSxlQUFBQSxDQUFBLHVCQUFBQSxDQUFBLHlCQUFBQSxDQUFBLFdBQUFGLE9BQUEsRUFBQUUsQ0FBQSxRQUFBRyxDQUFBLEdBQUFKLHdCQUFBLENBQUFHLENBQUEsT0FBQUMsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLEdBQUEsQ0FBQUosQ0FBQSxVQUFBRyxDQUFBLENBQUFFLEdBQUEsQ0FBQUwsQ0FBQSxPQUFBTSxDQUFBLEtBQUFDLFNBQUEsVUFBQUMsQ0FBQSxHQUFBQyxNQUFBLENBQUFDLGNBQUEsSUFBQUQsTUFBQSxDQUFBRSx3QkFBQSxXQUFBQyxDQUFBLElBQUFaLENBQUEsb0JBQUFZLENBQUEsSUFBQUgsTUFBQSxDQUFBSSxTQUFBLENBQUFDLGNBQUEsQ0FBQUMsSUFBQSxDQUFBZixDQUFBLEVBQUFZLENBQUEsU0FBQUksQ0FBQSxHQUFBUixDQUFBLEdBQUFDLE1BQUEsQ0FBQUUsd0JBQUEsQ0FBQVgsQ0FBQSxFQUFBWSxDQUFBLFVBQUFJLENBQUEsS0FBQUEsQ0FBQSxDQUFBWCxHQUFBLElBQUFXLENBQUEsQ0FBQUMsR0FBQSxJQUFBUixNQUFBLENBQUFDLGNBQUEsQ0FBQUosQ0FBQSxFQUFBTSxDQUFBLEVBQUFJLENBQUEsSUFBQVYsQ0FBQSxDQUFBTSxDQUFBLElBQUFaLENBQUEsQ0FBQVksQ0FBQSxZQUFBTixDQUFBLENBQUFSLE9BQUEsR0FBQUUsQ0FBQSxFQUFBRyxDQUFBLElBQUFBLENBQUEsQ0FBQWMsR0FBQSxDQUFBakIsQ0FBQSxFQUFBTSxDQUFBLEdBQUFBLENBQUE7QUFBQSxJQUFBWSxRQUFBLEdBQUFDLE9BQUEsQ0FBQXJCLE9BQUEsZ0JBd0M5SixJQUFBc0IsV0FBSSxFQUFDLFNBQVNDLEtBQUtBLENBQUFDLElBQUEsRUE2Qm5CO0VBQUEsSUE3Qm9CO0lBQ2pDQyxLQUFLO0lBQ0xDLE1BQU07SUFDTkMsS0FBSztJQUNMQyxJQUFJO0lBQ0pDLFdBQVc7SUFDWEMsYUFBYTtJQUNiQyxXQUFXO0lBQ1hDLE9BQU87SUFDUEMsV0FBVztJQUNYQyxJQUFJO0lBQ0pDLFdBQVc7SUFDWEMsT0FBTztJQUNQQyxPQUFPO0lBQ1BDLE1BQU07SUFDTkMsS0FBSztJQUNMQyxZQUFZO0lBQ1pDLG9CQUFvQjtJQUNwQkMsa0JBQWtCO0lBQ2xCQyxtQkFBbUI7SUFDbkJDLFlBQVk7SUFDWkMsZUFBZTtJQUNmQyxrQkFBa0I7SUFDbEJDLG9CQUFvQjtJQUNwQkMsZ0JBQWdCO0lBQ2hCQyxZQUFZO0lBQ1pDLGFBQWE7SUFDYkMsV0FBVztJQUNYQztFQUNVLENBQUMsR0FBQTVCLElBQUE7RUFFWCxNQUFNNkIsR0FBRyxHQUFHLElBQUlDLElBQUksQ0FBQyxDQUFDO0VBRXRCLE1BQU1DLGVBQWUsR0FBR25CLE9BQU8sSUFBSSxJQUFBb0IsbUJBQVUsRUFBQ3BCLE9BQU8sQ0FBQztFQUN0RCxNQUFNcUIsZUFBZSxHQUFHcEIsT0FBTyxJQUFJLElBQUFxQixpQkFBUSxFQUFDckIsT0FBTyxDQUFDO0VBRXBELE1BQU1zQixZQUFZLEdBQUcsSUFBQUMsMkJBQW9CLEVBQUNqQyxLQUFLLEVBQUVFLFdBQVcsRUFBRXNCLFdBQVcsQ0FBQztFQUUxRSxJQUFJVSxjQUFjLEdBQUd2QixNQUFNO0VBRTNCLElBQUlILFdBQVcsSUFBSSxXQUFXLElBQUlQLElBQUksQ0FBQ2tDLE1BQU0sRUFBRTtJQUM3QyxNQUFNO01BQUVDLFNBQVM7TUFBRUM7SUFBUSxDQUFDLEdBQUdwQyxJQUFJLENBQUNxQyxLQUFLO0lBRXpDSixjQUFjLEdBQUdBLGNBQWMsQ0FBQ0ssR0FBRyxDQUFDLENBQUNELEtBQUssRUFBRS9DLENBQUMsS0FBSztNQUNoRCxJQUFJQSxDQUFDLEtBQUtzQixZQUFZLENBQUMsQ0FBQyxDQUFDLEVBQUUsT0FBT3lCLEtBQUs7TUFDdkMsT0FBTztRQUNMLEdBQUdBLEtBQUs7UUFDUkYsU0FBUztRQUNUQztNQUNGLENBQUM7SUFDSCxDQUFDLENBQUM7RUFDSjtFQUVBLE1BQU1HLG1CQUFtQixHQUFHbEMsV0FBVyxJQUFJLENBQUNMLElBQUksQ0FBQ3dDLGNBQWM7RUFFL0Qsb0JBQ0U3RSxNQUFBLENBQUFTLE9BQUEsQ0FBQXFFLGFBQUE7SUFBS0MsU0FBUyxFQUFFNUMsTUFBTSxDQUFDQyxLQUFNO0lBQUNGLEtBQUssRUFBRUE7RUFBTSxHQUV2Q3lCLGFBQWEsZ0JBQUczRCxNQUFBLENBQUFTLE9BQUEsQ0FBQXFFLGFBQUE7SUFBS0MsU0FBUyxFQUFFNUMsTUFBTSxDQUFDNkM7RUFBVSxHQUFFLElBQUFDLGVBQU0sRUFBQzdDLEtBQUssRUFBRW1CLGtCQUFrQixFQUFFakIsV0FBVyxDQUFPLENBQUMsR0FBRyxJQUFJLEVBRy9Hb0IsWUFBWSxnQkFBRzFELE1BQUEsQ0FBQVMsT0FBQSxDQUFBcUUsYUFBQSxDQUFDSSxRQUFRO0lBQUMvQyxNQUFNLEVBQUVBLE1BQU87SUFBQ0csV0FBVyxFQUFFQSxXQUFZO0lBQUNrQixvQkFBb0IsRUFBRUE7RUFBcUIsQ0FBRSxDQUFDLEdBQUcsSUFBSSxlQUUxSHhELE1BQUEsQ0FBQVMsT0FBQSxDQUFBcUUsYUFBQTtJQUFLQyxTQUFTLEVBQUU1QyxNQUFNLENBQUNnRCxJQUFLO0lBQUM5QixZQUFZLEVBQUVBO0VBQWEsR0FFcEQsSUFBQStCLDBCQUFpQixFQUFDO0lBQUVDLEtBQUssRUFBRWpCLFlBQVksQ0FBQ2lCLEtBQUs7SUFBRUMsR0FBRyxFQUFFbEIsWUFBWSxDQUFDa0I7RUFBSSxDQUFDLENBQUMsQ0FBQ1gsR0FBRyxDQUFDLENBQUNZLEdBQVMsRUFBRUMsS0FBYSxLQUFLO0lBQ3hHLE1BQU1DLGNBQWMsR0FBRyxJQUFBQyxrQkFBUyxFQUFDSCxHQUFHLEVBQUVuQixZQUFZLENBQUN1QixnQkFBZ0IsQ0FBQztJQUNwRSxNQUFNQyxZQUFZLEdBQUcsSUFBQUYsa0JBQVMsRUFBQ0gsR0FBRyxFQUFFbkIsWUFBWSxDQUFDeUIsY0FBYyxDQUFDO0lBQ2hFLE1BQU1DLGVBQWUsR0FBSTlCLGVBQWUsSUFBSSxJQUFBK0IsaUJBQVEsRUFBQ1IsR0FBRyxFQUFFdkIsZUFBZSxDQUFDLElBQU1FLGVBQWUsSUFBSSxJQUFBOEIsZ0JBQU8sRUFBQ1QsR0FBRyxFQUFFckIsZUFBZSxDQUFFO0lBQ2pJLE1BQU0rQixzQkFBc0IsR0FBRzFELGFBQWEsQ0FBQzJELElBQUksQ0FBQ0MsWUFBWSxJQUM1RCxJQUFBVCxrQkFBUyxFQUFDUyxZQUFZLEVBQUVaLEdBQUcsQ0FDN0IsQ0FBQztJQUVELE1BQU1hLGFBQWEsR0FBRzVELFdBQVcsQ0FBQytDLEdBQUcsQ0FBQztJQUV0QyxvQkFDRXZGLE1BQUEsQ0FBQVMsT0FBQSxDQUFBcUUsYUFBQSxDQUFDMUUsUUFBQSxDQUFBSyxPQUFPO01BQ05rQyxJQUFJLEVBQUVBLElBQUs7TUFDWGtCLGtCQUFrQixFQUFFQSxrQkFBbUI7TUFDdkN3QyxHQUFHLEVBQUViLEtBQU07TUFDWGxDLGVBQWUsRUFBRUEsZUFBZ0I7TUFDakNWLFdBQVcsRUFBRUEsV0FBWTtNQUN6QkksS0FBSyxFQUFFQSxLQUFNO01BQ2JTLGdCQUFnQixFQUFFQSxnQkFBaUI7TUFDbkNWLE1BQU0sRUFBRXVCLGNBQWU7TUFDdkJpQixHQUFHLEVBQUVBLEdBQUk7TUFDVDlDLE9BQU8sRUFBRW1DLG1CQUFtQixHQUFHbkMsT0FBTyxHQUFHLElBQUs7TUFDOUM2RCxTQUFTLEVBQUUsSUFBQUEsa0JBQVMsRUFBQ2YsR0FBRyxDQUFFO01BQzFCZ0IsT0FBTyxFQUFFLElBQUFiLGtCQUFTLEVBQUNILEdBQUcsRUFBRXpCLEdBQUcsQ0FBRTtNQUM3QjBDLGFBQWEsRUFBRSxJQUFBZCxrQkFBUyxFQUFDSCxHQUFHLEVBQUUsSUFBQWtCLG9CQUFXLEVBQUNsQixHQUFHLEVBQUVqRCxXQUFXLENBQUMsQ0FBRTtNQUM3RG9FLFdBQVcsRUFBRSxJQUFBaEIsa0JBQVMsRUFBQ0gsR0FBRyxFQUFFLElBQUFvQixrQkFBUyxFQUFDcEIsR0FBRyxFQUFFakQsV0FBVyxDQUFDLENBQUU7TUFDekRtRCxjQUFjLEVBQUVBLGNBQWU7TUFDL0JHLFlBQVksRUFBRUEsWUFBYTtNQUMzQmdCLFFBQVEsRUFBRWQsZUFBZSxJQUFJRyxzQkFBc0IsSUFBSUcsYUFBYztNQUNyRVMsU0FBUyxFQUNQLENBQUMsSUFBQUMseUJBQWdCLEVBQUN2QixHQUFHLEVBQUU7UUFDckJGLEtBQUssRUFBRWpCLFlBQVksQ0FBQ3VCLGdCQUFnQjtRQUNwQ0wsR0FBRyxFQUFFbEIsWUFBWSxDQUFDeUI7TUFDcEIsQ0FBQyxDQUNGO01BQ0QxRCxNQUFNLEVBQUVBLE1BQU87TUFDZjRFLFdBQVcsRUFBRTdELG9CQUFxQjtNQUNsQzhELFNBQVMsRUFBRTdELGtCQUFtQjtNQUM5QjhELFlBQVksRUFBRTdEO0lBQW9CLENBQ25DLENBQUM7RUFFTixDQUFDLENBRUEsQ0FDRixDQUFDO0FBR1YsQ0FBQyxDQUFDO0FBUUYsU0FBUzhCLFFBQVFBLENBQUFnQyxLQUFBLEVBSUM7RUFBQSxJQUpBO0lBQ2hCL0UsTUFBTTtJQUNORyxXQUFXO0lBQ1hrQjtFQUNhLENBQUMsR0FBQTBELEtBQUE7RUFFZCxNQUFNcEQsR0FBRyxHQUFHLElBQUlDLElBQUksQ0FBQyxDQUFDO0VBRXRCLG9CQUNFL0QsTUFBQSxDQUFBUyxPQUFBLENBQUFxRSxhQUFBO0lBQUtDLFNBQVMsRUFBRTVDLE1BQU0sQ0FBQ2dGO0VBQVMsR0FFNUIsSUFBQS9CLDBCQUFpQixFQUFDO0lBQ2hCQyxLQUFLLEVBQUUsSUFBQW9CLG9CQUFXLEVBQUMzQyxHQUFHLEVBQUV4QixXQUFXLENBQUM7SUFDcENnRCxHQUFHLEVBQUUsSUFBQXFCLGtCQUFTLEVBQUM3QyxHQUFHLEVBQUV4QixXQUFXO0VBQ2pDLENBQUMsQ0FBQyxDQUFDcUMsR0FBRyxDQUFDLENBQUNZLEdBQVMsRUFBRTVELENBQVMsS0FBSztJQUMvQixvQkFDRTNCLE1BQUEsQ0FBQVMsT0FBQSxDQUFBcUUsYUFBQTtNQUFNQyxTQUFTLEVBQUU1QyxNQUFNLENBQUNpRixPQUFRO01BQUNmLEdBQUcsRUFBRTFFO0lBQUUsR0FBRSxJQUFBc0QsZUFBTSxFQUFDTSxHQUFHLEVBQUUvQixvQkFBb0IsRUFBRWxCLFdBQVcsQ0FBUSxDQUFDO0VBRXBHLENBQUMsQ0FFQSxDQUFDO0FBRVYifQ==