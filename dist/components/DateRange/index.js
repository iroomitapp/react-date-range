"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = DateRange;
var _react = _interopRequireDefault(require("react"));
var _Calendar = _interopRequireDefault(require("../Calendar"));
var _utils = require("../../utils");
var _styles = _interopRequireDefault(require("../../styles"));
var _dateFns = require("date-fns");
var _classnames = _interopRequireDefault(require("classnames"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
function DateRange(_ref) {
  let {
    ariaLabels,
    weekStartsOn,
    weekdayDisplayFormat,
    editableDateInputs,
    endDatePlaceholder,
    showMonthAndYearPickers,
    onShownDateChange,
    preventSnapRefocus,
    preview,
    scroll,
    showDateDisplay,
    showMonthArrow,
    showPreview,
    shownDate,
    startDatePlaceholder,
    date,
    dateDisplayFormat,
    dayContentRenderer,
    dayDisplayFormat,
    direction,
    disabledDay,
    dragSelectionEnabled,
    fixedHeight,
    locale,
    calendarFocus,
    className,
    monthDisplayFormat,
    months,
    onChange,
    classNames = {},
    ranges = [],
    moveRangeOnFirstSelection = false,
    retainEndDateOnFirstSelection = false,
    rangeColors = ['#3d91ff', '#3ecf8e', '#fed14c'],
    disabledDates = [],
    initialFocusedRange,
    focusedRange,
    maxDate,
    minDate,
    onRangeFocusChange,
    color,
    previewRange
  } = _ref;
  const refs = _react.default.useRef({
    styles: (0, _utils.generateStyles)([_styles.default, classNames])
  });
  const [state, setState] = _react.default.useState({
    focusedRange: initialFocusedRange || [(0, _utils.findNextRangeIndex)(ranges, 0)],
    preview: null
  });
  _react.default.useEffect(() => {
    updatePreview(previewRange ? calcNewSelection(previewRange, !previewRange.endDate) : null);
  }, [previewRange]);
  const calcNewSelection = function (value) {
    let isSingleValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
    const focusedRangeInternal = focusedRange || state.focusedRange;
    const focusedRangeIndex = focusedRangeInternal[0];
    const selectedRange = ranges[focusedRangeIndex];
    if (!selectedRange || !onChange) return {};
    let {
      startDate,
      endDate
    } = selectedRange;
    const now = new Date();
    let nextFocusRange;
    if (!isSingleValue) {
      startDate = value.startDate;
      endDate = value.endDate;
    } else if (focusedRangeInternal[1] === 0) {
      const dayOffset = (0, _dateFns.differenceInCalendarDays)(endDate || now, startDate);
      const calculateEndDate = () => {
        if (moveRangeOnFirstSelection) {
          return (0, _dateFns.addDays)(value, dayOffset);
        }
        if (retainEndDateOnFirstSelection) {
          if (!endDate || (0, _dateFns.isBefore)(value, endDate)) {
            return endDate;
          }
          return value;
        }
        return value || now;
      };
      startDate = value;
      endDate = calculateEndDate();
      if (maxDate) endDate = (0, _dateFns.min)([endDate, maxDate]);
      nextFocusRange = [focusedRangeInternal[0], 1];
    } else {
      endDate = value;
    }

    // reverse dates if startDate before endDate
    let isStartDateSelected = focusedRangeInternal[1] === 0;
    if ((0, _dateFns.isBefore)(endDate, startDate)) {
      isStartDateSelected = !isStartDateSelected;
      [startDate, endDate] = [endDate, startDate];
    }
    const inValidDatesWithinRange = disabledDates.filter(disabledDate => (0, _dateFns.isWithinInterval)(disabledDate, {
      start: startDate,
      end: endDate
    }));
    if (inValidDatesWithinRange.length > 0) {
      if (isStartDateSelected) {
        startDate = (0, _dateFns.addDays)((0, _dateFns.max)(inValidDatesWithinRange), 1);
      } else {
        endDate = (0, _dateFns.addDays)((0, _dateFns.min)(inValidDatesWithinRange), -1);
      }
    }
    if (!nextFocusRange) {
      const nextFocusRangeIndex = (0, _utils.findNextRangeIndex)(ranges, focusedRangeInternal[0]);
      nextFocusRange = [nextFocusRangeIndex, 0];
    }
    return {
      wasValid: !(inValidDatesWithinRange.length > 0),
      range: {
        startDate,
        endDate
      },
      nextFocusRange: nextFocusRange
    };
  };
  const setSelection = (value, isSingleValue) => {
    const focusedRangeIndex = (focusedRange || state.focusedRange)[0];
    const selectedRange = ranges[focusedRangeIndex];
    if (!selectedRange || !onChange) return;
    const newSelection = calcNewSelection(value, isSingleValue);
    const toChange = {
      [selectedRange.key || `range${focusedRangeIndex + 1}`]: {
        ...selectedRange,
        ...newSelection.range
      }
    };
    onChange?.(toChange);
    setState(s => ({
      ...s,
      focusedRange: newSelection.nextFocusRange,
      preview: null
    }));
    onRangeFocusChange?.(newSelection.nextFocusRange);
  };
  const handleRangeFocusChange = focusedRange => {
    setState(s => ({
      ...s,
      focusedRange
    }));
    onRangeFocusChange?.(focusedRange);
  };
  const updatePreview = val => {
    if (!val) {
      setState(s => ({
        ...s,
        preview: null
      }));
      return;
    }
    const focusedRangeInternal = focusedRange || state.focusedRange;
    const colorInternal = ranges[focusedRangeInternal[0]]?.color || rangeColors[focusedRangeInternal[0]] || color;
    setState(s => ({
      ...s,
      preview: {
        ...val.range,
        color: colorInternal
      }
    }));
  };
  return /*#__PURE__*/_react.default.createElement(_Calendar.default, {
    focusedRange: focusedRange || state.focusedRange,
    onRangeFocusChange: handleRangeFocusChange,
    preview: preview || state.preview,
    onPreviewChange: value => {
      updatePreview(value ? calcNewSelection(value) : null);
    },
    ariaLabels: ariaLabels,
    weekStartsOn: weekStartsOn,
    weekdayDisplayFormat: weekdayDisplayFormat,
    editableDateInputs: editableDateInputs,
    endDatePlaceholder: endDatePlaceholder,
    showMonthAndYearPickers: showMonthAndYearPickers,
    onShownDateChange: onShownDateChange,
    preventSnapRefocus: preventSnapRefocus,
    scroll: scroll,
    showDateDisplay: showDateDisplay,
    showMonthArrow: showMonthArrow,
    showPreview: showPreview,
    shownDate: shownDate,
    startDatePlaceholder: startDatePlaceholder,
    date: date,
    dateDisplayFormat: dateDisplayFormat,
    dayContentRenderer: dayContentRenderer,
    dayDisplayFormat: dayDisplayFormat,
    direction: direction,
    disabledDay: disabledDay,
    dragSelectionEnabled: dragSelectionEnabled,
    fixedHeight: fixedHeight,
    locale: locale,
    calendarFocus: calendarFocus,
    displayMode: "dateRange",
    className: (0, _classnames.default)(refs.current.styles.dateRangeWrapper, className),
    onChange: setSelection,
    updateRange: val => setSelection(val, false),
    monthDisplayFormat: monthDisplayFormat,
    months: months,
    classNames: classNames,
    ranges: ranges,
    rangeColors: rangeColors,
    disabledDates: disabledDates,
    initialFocusedRange: initialFocusedRange,
    maxDate: maxDate,
    minDate: minDate,
    color: color
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9DYWxlbmRhciIsIl91dGlscyIsIl9zdHlsZXMiLCJfZGF0ZUZucyIsIl9jbGFzc25hbWVzIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJEYXRlUmFuZ2UiLCJfcmVmIiwiYXJpYUxhYmVscyIsIndlZWtTdGFydHNPbiIsIndlZWtkYXlEaXNwbGF5Rm9ybWF0IiwiZWRpdGFibGVEYXRlSW5wdXRzIiwiZW5kRGF0ZVBsYWNlaG9sZGVyIiwic2hvd01vbnRoQW5kWWVhclBpY2tlcnMiLCJvblNob3duRGF0ZUNoYW5nZSIsInByZXZlbnRTbmFwUmVmb2N1cyIsInByZXZpZXciLCJzY3JvbGwiLCJzaG93RGF0ZURpc3BsYXkiLCJzaG93TW9udGhBcnJvdyIsInNob3dQcmV2aWV3Iiwic2hvd25EYXRlIiwic3RhcnREYXRlUGxhY2Vob2xkZXIiLCJkYXRlIiwiZGF0ZURpc3BsYXlGb3JtYXQiLCJkYXlDb250ZW50UmVuZGVyZXIiLCJkYXlEaXNwbGF5Rm9ybWF0IiwiZGlyZWN0aW9uIiwiZGlzYWJsZWREYXkiLCJkcmFnU2VsZWN0aW9uRW5hYmxlZCIsImZpeGVkSGVpZ2h0IiwibG9jYWxlIiwiY2FsZW5kYXJGb2N1cyIsImNsYXNzTmFtZSIsIm1vbnRoRGlzcGxheUZvcm1hdCIsIm1vbnRocyIsIm9uQ2hhbmdlIiwiY2xhc3NOYW1lcyIsInJhbmdlcyIsIm1vdmVSYW5nZU9uRmlyc3RTZWxlY3Rpb24iLCJyZXRhaW5FbmREYXRlT25GaXJzdFNlbGVjdGlvbiIsInJhbmdlQ29sb3JzIiwiZGlzYWJsZWREYXRlcyIsImluaXRpYWxGb2N1c2VkUmFuZ2UiLCJmb2N1c2VkUmFuZ2UiLCJtYXhEYXRlIiwibWluRGF0ZSIsIm9uUmFuZ2VGb2N1c0NoYW5nZSIsImNvbG9yIiwicHJldmlld1JhbmdlIiwicmVmcyIsIlJlYWN0IiwidXNlUmVmIiwic3R5bGVzIiwiZ2VuZXJhdGVTdHlsZXMiLCJTdHlsZXMiLCJzdGF0ZSIsInNldFN0YXRlIiwidXNlU3RhdGUiLCJmaW5kTmV4dFJhbmdlSW5kZXgiLCJ1c2VFZmZlY3QiLCJ1cGRhdGVQcmV2aWV3IiwiY2FsY05ld1NlbGVjdGlvbiIsImVuZERhdGUiLCJ2YWx1ZSIsImlzU2luZ2xlVmFsdWUiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJmb2N1c2VkUmFuZ2VJbnRlcm5hbCIsImZvY3VzZWRSYW5nZUluZGV4Iiwic2VsZWN0ZWRSYW5nZSIsInN0YXJ0RGF0ZSIsIm5vdyIsIkRhdGUiLCJuZXh0Rm9jdXNSYW5nZSIsImRheU9mZnNldCIsImRpZmZlcmVuY2VJbkNhbGVuZGFyRGF5cyIsImNhbGN1bGF0ZUVuZERhdGUiLCJhZGREYXlzIiwiaXNCZWZvcmUiLCJtaW4iLCJpc1N0YXJ0RGF0ZVNlbGVjdGVkIiwiaW5WYWxpZERhdGVzV2l0aGluUmFuZ2UiLCJmaWx0ZXIiLCJkaXNhYmxlZERhdGUiLCJpc1dpdGhpbkludGVydmFsIiwic3RhcnQiLCJlbmQiLCJtYXgiLCJuZXh0Rm9jdXNSYW5nZUluZGV4Iiwid2FzVmFsaWQiLCJyYW5nZSIsInNldFNlbGVjdGlvbiIsIm5ld1NlbGVjdGlvbiIsInRvQ2hhbmdlIiwia2V5IiwicyIsImhhbmRsZVJhbmdlRm9jdXNDaGFuZ2UiLCJ2YWwiLCJjb2xvckludGVybmFsIiwiY3JlYXRlRWxlbWVudCIsIm9uUHJldmlld0NoYW5nZSIsImRpc3BsYXlNb2RlIiwiY2xhc3NuYW1lcyIsImN1cnJlbnQiLCJkYXRlUmFuZ2VXcmFwcGVyIiwidXBkYXRlUmFuZ2UiXSwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY29tcG9uZW50cy9EYXRlUmFuZ2UvaW5kZXgudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgQ2FsZW5kYXIsIHsgQ2FsZW5kYXJQcm9wcyB9IGZyb20gJy4uL0NhbGVuZGFyJztcbmltcG9ydCB7IHR5cGUgRGF0ZVJhbmdlIH0gZnJvbSAnLi4vRGF5Q2VsbCc7XG5pbXBvcnQgeyBmaW5kTmV4dFJhbmdlSW5kZXgsIGdlbmVyYXRlU3R5bGVzIH0gZnJvbSAnLi4vLi4vdXRpbHMnO1xuaW1wb3J0IFN0eWxlcyBmcm9tICcuLi8uLi9zdHlsZXMnO1xuaW1wb3J0IHsgYWRkRGF5cywgZGlmZmVyZW5jZUluQ2FsZW5kYXJEYXlzLCBpc0JlZm9yZSwgaXNXaXRoaW5JbnRlcnZhbCwgbWF4LCBtaW4gfSBmcm9tICdkYXRlLWZucyc7XG5pbXBvcnQgY2xhc3NuYW1lcyBmcm9tICdjbGFzc25hbWVzJztcblxuZXhwb3J0IHR5cGUgRGF0ZVJhbmdlUHJvcHMgPSB7XG4gIG9uQ2hhbmdlOiAoZGF0ZVJhbmdlOiBEYXRlUmFuZ2UpID0+IHZvaWQsXG4gIG9uUmFuZ2VGb2N1c0NoYW5nZT86IChyYW5nZTogbnVtYmVyW10pID0+IHZvaWQsXG4gIGNsYXNzTmFtZT86IHN0cmluZyxcbiAgcmFuZ2VzPzogRGF0ZVJhbmdlW10sXG4gIG1vdmVSYW5nZU9uRmlyc3RTZWxlY3Rpb24/OiBib29sZWFuLFxuICByZXRhaW5FbmREYXRlT25GaXJzdFNlbGVjdGlvbj86IGJvb2xlYW4sXG4gIHByZXZpZXdSYW5nZT86IERhdGVSYW5nZSxcbn0gJiBDYWxlbmRhclByb3BzO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBEYXRlUmFuZ2Uoe1xuICBhcmlhTGFiZWxzLFxuICB3ZWVrU3RhcnRzT24sXG4gIHdlZWtkYXlEaXNwbGF5Rm9ybWF0LFxuICBlZGl0YWJsZURhdGVJbnB1dHMsXG4gIGVuZERhdGVQbGFjZWhvbGRlcixcbiAgc2hvd01vbnRoQW5kWWVhclBpY2tlcnMsXG4gIG9uU2hvd25EYXRlQ2hhbmdlLFxuICBwcmV2ZW50U25hcFJlZm9jdXMsXG4gIHByZXZpZXcsXG4gIHNjcm9sbCxcbiAgc2hvd0RhdGVEaXNwbGF5LFxuICBzaG93TW9udGhBcnJvdyxcbiAgc2hvd1ByZXZpZXcsXG4gIHNob3duRGF0ZSxcbiAgc3RhcnREYXRlUGxhY2Vob2xkZXIsXG4gIGRhdGUsXG4gIGRhdGVEaXNwbGF5Rm9ybWF0LFxuICBkYXlDb250ZW50UmVuZGVyZXIsXG4gIGRheURpc3BsYXlGb3JtYXQsXG4gIGRpcmVjdGlvbixcbiAgZGlzYWJsZWREYXksXG4gIGRyYWdTZWxlY3Rpb25FbmFibGVkLFxuICBmaXhlZEhlaWdodCxcbiAgbG9jYWxlLFxuICBjYWxlbmRhckZvY3VzLFxuICBjbGFzc05hbWUsXG4gIG1vbnRoRGlzcGxheUZvcm1hdCxcbiAgbW9udGhzLFxuICBvbkNoYW5nZSxcbiAgY2xhc3NOYW1lcyA9IHt9LFxuICByYW5nZXMgPSBbXSxcbiAgbW92ZVJhbmdlT25GaXJzdFNlbGVjdGlvbiA9IGZhbHNlLFxuICByZXRhaW5FbmREYXRlT25GaXJzdFNlbGVjdGlvbiA9IGZhbHNlLFxuICByYW5nZUNvbG9ycyA9IFsnIzNkOTFmZicsICcjM2VjZjhlJywgJyNmZWQxNGMnXSxcbiAgZGlzYWJsZWREYXRlcyA9IFtdLFxuICBpbml0aWFsRm9jdXNlZFJhbmdlLFxuICBmb2N1c2VkUmFuZ2UsXG4gIG1heERhdGUsXG4gIG1pbkRhdGUsXG4gIG9uUmFuZ2VGb2N1c0NoYW5nZSxcbiAgY29sb3IsXG4gIHByZXZpZXdSYW5nZVxufTogRGF0ZVJhbmdlUHJvcHMpIHtcblxuICBjb25zdCByZWZzID0gUmVhY3QudXNlUmVmKHtcbiAgICBzdHlsZXM6IGdlbmVyYXRlU3R5bGVzKFtTdHlsZXMsIGNsYXNzTmFtZXNdKVxuICB9KTtcblxuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IFJlYWN0LnVzZVN0YXRlKHtcbiAgICBmb2N1c2VkUmFuZ2U6IGluaXRpYWxGb2N1c2VkUmFuZ2UgfHwgW2ZpbmROZXh0UmFuZ2VJbmRleChyYW5nZXMsIDApXSxcbiAgICBwcmV2aWV3OiBudWxsXG4gIH0pO1xuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdXBkYXRlUHJldmlldyhwcmV2aWV3UmFuZ2UgPyBjYWxjTmV3U2VsZWN0aW9uKHByZXZpZXdSYW5nZSwgIXByZXZpZXdSYW5nZS5lbmREYXRlKSA6IG51bGwpXG4gIH0sIFtwcmV2aWV3UmFuZ2VdKTtcblxuICBjb25zdCBjYWxjTmV3U2VsZWN0aW9uID0gKHZhbHVlOiBEYXRlUmFuZ2UgfCBEYXRlLCBpc1NpbmdsZVZhbHVlID0gdHJ1ZSkgPT4ge1xuICAgIGNvbnN0IGZvY3VzZWRSYW5nZUludGVybmFsID0gKGZvY3VzZWRSYW5nZSB8fCBzdGF0ZS5mb2N1c2VkUmFuZ2UpO1xuICAgIGNvbnN0IGZvY3VzZWRSYW5nZUluZGV4ID0gZm9jdXNlZFJhbmdlSW50ZXJuYWxbMF07XG4gICAgY29uc3Qgc2VsZWN0ZWRSYW5nZSA9IHJhbmdlc1tmb2N1c2VkUmFuZ2VJbmRleF07XG5cbiAgICBpZiAoIXNlbGVjdGVkUmFuZ2UgfHwgIW9uQ2hhbmdlKSByZXR1cm4ge307XG5cbiAgICBsZXQgeyBzdGFydERhdGUsIGVuZERhdGUgfSA9IHNlbGVjdGVkUmFuZ2U7XG5cbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuXG4gICAgbGV0IG5leHRGb2N1c1JhbmdlOiB1bmRlZmluZWQgfCBudW1iZXJbXTtcblxuICAgIGlmICghaXNTaW5nbGVWYWx1ZSkge1xuICAgICAgc3RhcnREYXRlID0gKHZhbHVlIGFzIERhdGVSYW5nZSkuc3RhcnREYXRlO1xuICAgICAgZW5kRGF0ZSA9ICh2YWx1ZSBhcyBEYXRlUmFuZ2UpLmVuZERhdGU7XG4gICAgfSBlbHNlIGlmIChmb2N1c2VkUmFuZ2VJbnRlcm5hbFsxXSA9PT0gMCkge1xuICAgICAgY29uc3QgZGF5T2Zmc2V0ID0gZGlmZmVyZW5jZUluQ2FsZW5kYXJEYXlzKGVuZERhdGUgfHwgbm93LCBzdGFydERhdGUpO1xuXG4gICAgICBjb25zdCBjYWxjdWxhdGVFbmREYXRlID0gKCkgPT4ge1xuICAgICAgICBpZiAobW92ZVJhbmdlT25GaXJzdFNlbGVjdGlvbikge1xuICAgICAgICAgIHJldHVybiBhZGREYXlzKHZhbHVlIGFzIERhdGUsIGRheU9mZnNldCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmV0YWluRW5kRGF0ZU9uRmlyc3RTZWxlY3Rpb24pIHtcbiAgICAgICAgICBpZiAoIWVuZERhdGUgfHwgaXNCZWZvcmUodmFsdWUgYXMgRGF0ZSwgZW5kRGF0ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBlbmREYXRlO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdmFsdWUgYXMgRGF0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAodmFsdWUgYXMgRGF0ZSB8fCBub3cpO1xuICAgICAgfVxuXG4gICAgICBzdGFydERhdGUgPSB2YWx1ZSBhcyBEYXRlO1xuICAgICAgZW5kRGF0ZSA9IGNhbGN1bGF0ZUVuZERhdGUoKTtcbiAgICAgIGlmIChtYXhEYXRlKSBlbmREYXRlID0gbWluKFtlbmREYXRlLCBtYXhEYXRlXSk7XG5cbiAgICAgIG5leHRGb2N1c1JhbmdlID0gW2ZvY3VzZWRSYW5nZUludGVybmFsWzBdLCAxXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZW5kRGF0ZSA9IHZhbHVlIGFzIERhdGU7XG4gICAgfVxuXG4gICAgLy8gcmV2ZXJzZSBkYXRlcyBpZiBzdGFydERhdGUgYmVmb3JlIGVuZERhdGVcbiAgICBsZXQgaXNTdGFydERhdGVTZWxlY3RlZCA9IGZvY3VzZWRSYW5nZUludGVybmFsWzFdID09PSAwO1xuICAgIGlmIChpc0JlZm9yZShlbmREYXRlLCBzdGFydERhdGUpKSB7XG4gICAgICBpc1N0YXJ0RGF0ZVNlbGVjdGVkID0gIWlzU3RhcnREYXRlU2VsZWN0ZWQ7XG4gICAgICBbc3RhcnREYXRlLCBlbmREYXRlXSA9IFtlbmREYXRlLCBzdGFydERhdGVdO1xuICAgIH1cblxuICAgIGNvbnN0IGluVmFsaWREYXRlc1dpdGhpblJhbmdlID0gZGlzYWJsZWREYXRlcy5maWx0ZXIoZGlzYWJsZWREYXRlID0+XG4gICAgICBpc1dpdGhpbkludGVydmFsKGRpc2FibGVkRGF0ZSwge1xuICAgICAgICBzdGFydDogc3RhcnREYXRlLFxuICAgICAgICBlbmQ6IGVuZERhdGUsXG4gICAgICB9KVxuICAgICk7XG5cbiAgICBpZiAoaW5WYWxpZERhdGVzV2l0aGluUmFuZ2UubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKGlzU3RhcnREYXRlU2VsZWN0ZWQpIHtcbiAgICAgICAgc3RhcnREYXRlID0gYWRkRGF5cyhtYXgoaW5WYWxpZERhdGVzV2l0aGluUmFuZ2UpLCAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVuZERhdGUgPSBhZGREYXlzKG1pbihpblZhbGlkRGF0ZXNXaXRoaW5SYW5nZSksIC0xKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIW5leHRGb2N1c1JhbmdlKSB7XG4gICAgICBjb25zdCBuZXh0Rm9jdXNSYW5nZUluZGV4ID0gZmluZE5leHRSYW5nZUluZGV4KHJhbmdlcywgZm9jdXNlZFJhbmdlSW50ZXJuYWxbMF0pO1xuICAgICAgbmV4dEZvY3VzUmFuZ2UgPSBbbmV4dEZvY3VzUmFuZ2VJbmRleCwgMF07XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHdhc1ZhbGlkOiAhKGluVmFsaWREYXRlc1dpdGhpblJhbmdlLmxlbmd0aCA+IDApLFxuICAgICAgcmFuZ2U6IHsgc3RhcnREYXRlLCBlbmREYXRlIH0sXG4gICAgICBuZXh0Rm9jdXNSYW5nZTogbmV4dEZvY3VzUmFuZ2UsXG4gICAgfTtcblxuICB9XG5cbiAgY29uc3Qgc2V0U2VsZWN0aW9uID0gKHZhbHVlOiBEYXRlUmFuZ2UgfCBEYXRlLCBpc1NpbmdsZVZhbHVlPzogYm9vbGVhbikgPT4ge1xuICAgIGNvbnN0IGZvY3VzZWRSYW5nZUluZGV4ID0gKGZvY3VzZWRSYW5nZSB8fCBzdGF0ZS5mb2N1c2VkUmFuZ2UpWzBdO1xuXG4gICAgY29uc3Qgc2VsZWN0ZWRSYW5nZSA9IHJhbmdlc1tmb2N1c2VkUmFuZ2VJbmRleF07XG4gICAgaWYgKCFzZWxlY3RlZFJhbmdlIHx8ICFvbkNoYW5nZSkgcmV0dXJuO1xuXG4gICAgY29uc3QgbmV3U2VsZWN0aW9uID0gY2FsY05ld1NlbGVjdGlvbih2YWx1ZSwgaXNTaW5nbGVWYWx1ZSk7XG5cbiAgICBjb25zdCB0b0NoYW5nZSA9IHtcbiAgICAgIFtzZWxlY3RlZFJhbmdlLmtleSB8fCBgcmFuZ2Uke2ZvY3VzZWRSYW5nZUluZGV4ICsgMX1gXToge1xuICAgICAgICAuLi5zZWxlY3RlZFJhbmdlLFxuICAgICAgICAuLi5uZXdTZWxlY3Rpb24ucmFuZ2UsXG4gICAgICB9LFxuICAgIH07XG4gICAgXG4gICAgb25DaGFuZ2U/Lih0b0NoYW5nZSBhcyB1bmtub3duIGFzIERhdGVSYW5nZSk7XG5cbiAgICBzZXRTdGF0ZShzID0+ICh7IC4uLnMsIGZvY3VzZWRSYW5nZTogbmV3U2VsZWN0aW9uLm5leHRGb2N1c1JhbmdlLCBwcmV2aWV3OiBudWxsIH0pKTtcblxuICAgIG9uUmFuZ2VGb2N1c0NoYW5nZT8uKG5ld1NlbGVjdGlvbi5uZXh0Rm9jdXNSYW5nZSk7XG4gIH1cblxuICBjb25zdCBoYW5kbGVSYW5nZUZvY3VzQ2hhbmdlID0gKGZvY3VzZWRSYW5nZTogbnVtYmVyW10pID0+IHtcbiAgICBzZXRTdGF0ZShzID0+ICh7IC4uLnMsIGZvY3VzZWRSYW5nZSB9KSk7XG4gICAgb25SYW5nZUZvY3VzQ2hhbmdlPy4oZm9jdXNlZFJhbmdlKTtcbiAgfVxuXG4gIGNvbnN0IHVwZGF0ZVByZXZpZXcgPSAodmFsPzoge1xuICAgIHdhc1ZhbGlkPzogYm9vbGVhbixcbiAgICByYW5nZT86IERhdGVSYW5nZSxcbiAgICBuZXh0Rm9jdXNSYW5nZT86IG51bWJlcltdLFxuICB9KSA9PiB7XG5cbiAgICBpZiAoIXZhbCkge1xuICAgICAgc2V0U3RhdGUocyA9PiAoeyAuLi5zLCBwcmV2aWV3OiBudWxsIH0pKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBmb2N1c2VkUmFuZ2VJbnRlcm5hbCA9IGZvY3VzZWRSYW5nZSB8fCBzdGF0ZS5mb2N1c2VkUmFuZ2U7XG4gICAgY29uc3QgY29sb3JJbnRlcm5hbCA9IHJhbmdlc1tmb2N1c2VkUmFuZ2VJbnRlcm5hbFswXV0/LmNvbG9yIHx8IHJhbmdlQ29sb3JzW2ZvY3VzZWRSYW5nZUludGVybmFsWzBdXSB8fCBjb2xvcjtcblxuICAgIHNldFN0YXRlKChzID0+ICh7IC4uLnMsIHByZXZpZXc6IHsgLi4udmFsLnJhbmdlLCBjb2xvcjogY29sb3JJbnRlcm5hbCB9IH0pKSk7XG4gIH1cbiAgXG4gIHJldHVybiAoXG4gICAgPENhbGVuZGFyXG4gICAgICBmb2N1c2VkUmFuZ2U9e2ZvY3VzZWRSYW5nZSB8fCBzdGF0ZS5mb2N1c2VkUmFuZ2V9XG4gICAgICBvblJhbmdlRm9jdXNDaGFuZ2U9e2hhbmRsZVJhbmdlRm9jdXNDaGFuZ2V9XG4gICAgICBwcmV2aWV3PXtwcmV2aWV3IHx8IHN0YXRlLnByZXZpZXd9XG4gICAgICBvblByZXZpZXdDaGFuZ2U9e3ZhbHVlID0+IHtcbiAgICAgICAgdXBkYXRlUHJldmlldyh2YWx1ZSA/IGNhbGNOZXdTZWxlY3Rpb24odmFsdWUpIDogbnVsbCk7XG4gICAgICB9fVxuICAgICAgYXJpYUxhYmVscz17YXJpYUxhYmVsc31cbiAgICAgIHdlZWtTdGFydHNPbj17d2Vla1N0YXJ0c09ufVxuICAgICAgd2Vla2RheURpc3BsYXlGb3JtYXQ9e3dlZWtkYXlEaXNwbGF5Rm9ybWF0fVxuICAgICAgZWRpdGFibGVEYXRlSW5wdXRzPXtlZGl0YWJsZURhdGVJbnB1dHN9XG4gICAgICBlbmREYXRlUGxhY2Vob2xkZXI9e2VuZERhdGVQbGFjZWhvbGRlcn1cbiAgICAgIHNob3dNb250aEFuZFllYXJQaWNrZXJzPXtzaG93TW9udGhBbmRZZWFyUGlja2Vyc31cbiAgICAgIG9uU2hvd25EYXRlQ2hhbmdlPXtvblNob3duRGF0ZUNoYW5nZX1cbiAgICAgIHByZXZlbnRTbmFwUmVmb2N1cz17cHJldmVudFNuYXBSZWZvY3VzfVxuICAgICAgc2Nyb2xsPXtzY3JvbGx9XG4gICAgICBzaG93RGF0ZURpc3BsYXk9e3Nob3dEYXRlRGlzcGxheX1cbiAgICAgIHNob3dNb250aEFycm93PXtzaG93TW9udGhBcnJvd31cbiAgICAgIHNob3dQcmV2aWV3PXtzaG93UHJldmlld31cbiAgICAgIHNob3duRGF0ZT17c2hvd25EYXRlfVxuICAgICAgc3RhcnREYXRlUGxhY2Vob2xkZXI9e3N0YXJ0RGF0ZVBsYWNlaG9sZGVyfVxuICAgICAgZGF0ZT17ZGF0ZX1cbiAgICAgIGRhdGVEaXNwbGF5Rm9ybWF0PXtkYXRlRGlzcGxheUZvcm1hdH1cbiAgICAgIGRheUNvbnRlbnRSZW5kZXJlcj17ZGF5Q29udGVudFJlbmRlcmVyfVxuICAgICAgZGF5RGlzcGxheUZvcm1hdD17ZGF5RGlzcGxheUZvcm1hdH1cbiAgICAgIGRpcmVjdGlvbj17ZGlyZWN0aW9ufVxuICAgICAgZGlzYWJsZWREYXk9e2Rpc2FibGVkRGF5fVxuICAgICAgZHJhZ1NlbGVjdGlvbkVuYWJsZWQ9e2RyYWdTZWxlY3Rpb25FbmFibGVkfVxuICAgICAgZml4ZWRIZWlnaHQ9e2ZpeGVkSGVpZ2h0fVxuICAgICAgbG9jYWxlPXtsb2NhbGV9XG4gICAgICBjYWxlbmRhckZvY3VzPXtjYWxlbmRhckZvY3VzfVxuICAgICAgZGlzcGxheU1vZGU9J2RhdGVSYW5nZSdcbiAgICAgIGNsYXNzTmFtZT17Y2xhc3NuYW1lcyhyZWZzLmN1cnJlbnQuc3R5bGVzLmRhdGVSYW5nZVdyYXBwZXIsIGNsYXNzTmFtZSl9XG4gICAgICBvbkNoYW5nZT17c2V0U2VsZWN0aW9ufVxuICAgICAgdXBkYXRlUmFuZ2U9e3ZhbCA9PiBzZXRTZWxlY3Rpb24odmFsLCBmYWxzZSl9XG4gICAgICBtb250aERpc3BsYXlGb3JtYXQ9e21vbnRoRGlzcGxheUZvcm1hdH1cbiAgICAgIG1vbnRocz17bW9udGhzfVxuICAgICAgY2xhc3NOYW1lcz17Y2xhc3NOYW1lc31cbiAgICAgIHJhbmdlcz17cmFuZ2VzfVxuICAgICAgcmFuZ2VDb2xvcnM9e3JhbmdlQ29sb3JzfVxuICAgICAgZGlzYWJsZWREYXRlcz17ZGlzYWJsZWREYXRlc31cbiAgICAgIGluaXRpYWxGb2N1c2VkUmFuZ2U9e2luaXRpYWxGb2N1c2VkUmFuZ2V9XG4gICAgICBtYXhEYXRlPXttYXhEYXRlfVxuICAgICAgbWluRGF0ZT17bWluRGF0ZX1cbiAgICAgIGNvbG9yPXtjb2xvcn1cbiAgICAvPlxuICApXG59ICJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsTUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsU0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBRUEsSUFBQUUsTUFBQSxHQUFBRixPQUFBO0FBQ0EsSUFBQUcsT0FBQSxHQUFBSixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUksUUFBQSxHQUFBSixPQUFBO0FBQ0EsSUFBQUssV0FBQSxHQUFBTixzQkFBQSxDQUFBQyxPQUFBO0FBQW9DLFNBQUFELHVCQUFBTyxHQUFBLFdBQUFBLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLEdBQUFELEdBQUEsS0FBQUUsT0FBQSxFQUFBRixHQUFBO0FBWXJCLFNBQVNHLFNBQVNBLENBQUFDLElBQUEsRUEyQ2Q7RUFBQSxJQTNDZTtJQUNoQ0MsVUFBVTtJQUNWQyxZQUFZO0lBQ1pDLG9CQUFvQjtJQUNwQkMsa0JBQWtCO0lBQ2xCQyxrQkFBa0I7SUFDbEJDLHVCQUF1QjtJQUN2QkMsaUJBQWlCO0lBQ2pCQyxrQkFBa0I7SUFDbEJDLE9BQU87SUFDUEMsTUFBTTtJQUNOQyxlQUFlO0lBQ2ZDLGNBQWM7SUFDZEMsV0FBVztJQUNYQyxTQUFTO0lBQ1RDLG9CQUFvQjtJQUNwQkMsSUFBSTtJQUNKQyxpQkFBaUI7SUFDakJDLGtCQUFrQjtJQUNsQkMsZ0JBQWdCO0lBQ2hCQyxTQUFTO0lBQ1RDLFdBQVc7SUFDWEMsb0JBQW9CO0lBQ3BCQyxXQUFXO0lBQ1hDLE1BQU07SUFDTkMsYUFBYTtJQUNiQyxTQUFTO0lBQ1RDLGtCQUFrQjtJQUNsQkMsTUFBTTtJQUNOQyxRQUFRO0lBQ1JDLFVBQVUsR0FBRyxDQUFDLENBQUM7SUFDZkMsTUFBTSxHQUFHLEVBQUU7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