"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.calcFocusDate = calcFocusDate;
exports.findNextRangeIndex = findNextRangeIndex;
exports.generateStyles = generateStyles;
exports.getMonthDisplayRange = getMonthDisplayRange;
var _classnames = _interopRequireDefault(require("classnames"));
var _dateFns = require("date-fns");
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
function calcFocusDate(currentFocusedDate, shownDate, date, months, ranges, focusedRange, displayMode) {
  // find primary date according the props
  let targetInterval;
  if (displayMode === 'dateRange') {
    const range = ranges[focusedRange[0]];
    targetInterval = {
      startDate: range?.startDate,
      endDate: range?.endDate
    };
  } else {
    targetInterval = {
      startDate: date,
      endDate: date
    };
  }
  targetInterval.startDate = (0, _dateFns.startOfMonth)(targetInterval.startDate || new Date());
  targetInterval.endDate = (0, _dateFns.endOfMonth)(targetInterval.endDate || targetInterval.startDate);
  const targetDate = targetInterval.startDate || targetInterval.endDate || shownDate || new Date();

  // initial focus
  if (!currentFocusedDate) return shownDate || targetDate;

  // // just return targetDate for native scrolled calendars
  // if (scroll.enabled) return targetDate;
  if ((0, _dateFns.differenceInCalendarMonths)(targetInterval.startDate, targetInterval.endDate) > months) {
    // don't change focused if new selection in view area
    return currentFocusedDate;
  }
  return targetDate;
}
function findNextRangeIndex(ranges) {
  let currentRangeIndex = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : -1;
  const nextIndex = ranges.findIndex((range, i) => i > currentRangeIndex && range.autoFocus !== false && !range.disabled);
  if (nextIndex !== -1) return nextIndex;
  return ranges.findIndex(range => range.autoFocus !== false && !range.disabled);
}
function getMonthDisplayRange(date, dateOptions, fixedHeight) {
  const startDateOfMonth = (0, _dateFns.startOfMonth)(date);
  const endDateOfMonth = (0, _dateFns.endOfMonth)(date);
  const startDateOfCalendar = (0, _dateFns.startOfWeek)(startDateOfMonth, dateOptions);
  let endDateOfCalendar = (0, _dateFns.endOfWeek)(endDateOfMonth, dateOptions);
  if (fixedHeight && (0, _dateFns.differenceInCalendarDays)(endDateOfCalendar, startDateOfCalendar) <= 34) {
    endDateOfCalendar = (0, _dateFns.addDays)(endDateOfCalendar, 7);
  }
  return {
    start: startDateOfCalendar,
    end: endDateOfCalendar,
    startDateOfMonth,
    endDateOfMonth
  };
}
function generateStyles(sources) {
  if (!sources.length) return {};
  const generatedStyles = sources.filter(source => Boolean(source)).reduce((styles, styleSource) => {
    Object.keys(styleSource).forEach(key => {
      styles[key] = (0, _classnames.default)(styles[key], styleSource[key]);
    });
    return styles;
  }, {});
  return generatedStyles;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY2xhc3NuYW1lcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2RhdGVGbnMiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImNhbGNGb2N1c0RhdGUiLCJjdXJyZW50Rm9jdXNlZERhdGUiLCJzaG93bkRhdGUiLCJkYXRlIiwibW9udGhzIiwicmFuZ2VzIiwiZm9jdXNlZFJhbmdlIiwiZGlzcGxheU1vZGUiLCJ0YXJnZXRJbnRlcnZhbCIsInJhbmdlIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsInN0YXJ0T2ZNb250aCIsIkRhdGUiLCJlbmRPZk1vbnRoIiwidGFyZ2V0RGF0ZSIsImRpZmZlcmVuY2VJbkNhbGVuZGFyTW9udGhzIiwiZmluZE5leHRSYW5nZUluZGV4IiwiY3VycmVudFJhbmdlSW5kZXgiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJuZXh0SW5kZXgiLCJmaW5kSW5kZXgiLCJpIiwiYXV0b0ZvY3VzIiwiZGlzYWJsZWQiLCJnZXRNb250aERpc3BsYXlSYW5nZSIsImRhdGVPcHRpb25zIiwiZml4ZWRIZWlnaHQiLCJzdGFydERhdGVPZk1vbnRoIiwiZW5kRGF0ZU9mTW9udGgiLCJzdGFydERhdGVPZkNhbGVuZGFyIiwic3RhcnRPZldlZWsiLCJlbmREYXRlT2ZDYWxlbmRhciIsImVuZE9mV2VlayIsImRpZmZlcmVuY2VJbkNhbGVuZGFyRGF5cyIsImFkZERheXMiLCJzdGFydCIsImVuZCIsImdlbmVyYXRlU3R5bGVzIiwic291cmNlcyIsImdlbmVyYXRlZFN0eWxlcyIsImZpbHRlciIsInNvdXJjZSIsIkJvb2xlYW4iLCJyZWR1Y2UiLCJzdHlsZXMiLCJzdHlsZVNvdXJjZSIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwia2V5IiwiY2xhc3NuYW1lcyJdLCJzb3VyY2VzIjpbIi4uL3NyYy91dGlscy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY2xhc3NuYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCB7XG4gIHN0YXJ0T2ZNb250aCxcbiAgZW5kT2ZNb250aCxcbiAgc3RhcnRPZldlZWssXG4gIGVuZE9mV2VlayxcbiAgZGlmZmVyZW5jZUluQ2FsZW5kYXJEYXlzLFxuICBkaWZmZXJlbmNlSW5DYWxlbmRhck1vbnRocyxcbiAgYWRkRGF5cyxcbiAgV2Vla09wdGlvbnMsXG59IGZyb20gJ2RhdGUtZm5zJztcbmltcG9ydCB7IFN0eWxlc1R5cGUgfSBmcm9tICcuL3N0eWxlcyc7XG5pbXBvcnQgeyBEYXRlUmFuZ2UgfSBmcm9tICcuL2NvbXBvbmVudHMvRGF5Q2VsbCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjYWxjRm9jdXNEYXRlKGN1cnJlbnRGb2N1c2VkRGF0ZTogRGF0ZSwgc2hvd25EYXRlPzogRGF0ZSwgZGF0ZT86IERhdGUsIG1vbnRocz86IG51bWJlciwgcmFuZ2VzPzogRGF0ZVJhbmdlW10sIGZvY3VzZWRSYW5nZT86IG51bWJlcltdLCBkaXNwbGF5TW9kZT86IFwiZGF0ZVJhbmdlXCIgfCBcImRhdGVcIikge1xuICAvLyBmaW5kIHByaW1hcnkgZGF0ZSBhY2NvcmRpbmcgdGhlIHByb3BzXG4gIGxldCB0YXJnZXRJbnRlcnZhbDogRGF0ZVJhbmdlO1xuICBpZiAoZGlzcGxheU1vZGUgPT09ICdkYXRlUmFuZ2UnKSB7XG4gICAgY29uc3QgcmFuZ2UgPSByYW5nZXNbZm9jdXNlZFJhbmdlWzBdXTtcbiAgICB0YXJnZXRJbnRlcnZhbCA9IHtcbiAgICAgIHN0YXJ0RGF0ZTogcmFuZ2U/LnN0YXJ0RGF0ZSxcbiAgICAgIGVuZERhdGU6IHJhbmdlPy5lbmREYXRlLFxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgdGFyZ2V0SW50ZXJ2YWwgPSB7XG4gICAgICBzdGFydERhdGU6IGRhdGUsXG4gICAgICBlbmREYXRlOiBkYXRlLFxuICAgIH07XG4gIH1cbiAgdGFyZ2V0SW50ZXJ2YWwuc3RhcnREYXRlID0gc3RhcnRPZk1vbnRoKHRhcmdldEludGVydmFsLnN0YXJ0RGF0ZSB8fCBuZXcgRGF0ZSgpKTtcbiAgdGFyZ2V0SW50ZXJ2YWwuZW5kRGF0ZSA9IGVuZE9mTW9udGgodGFyZ2V0SW50ZXJ2YWwuZW5kRGF0ZSB8fCB0YXJnZXRJbnRlcnZhbC5zdGFydERhdGUpO1xuICBjb25zdCB0YXJnZXREYXRlID0gdGFyZ2V0SW50ZXJ2YWwuc3RhcnREYXRlIHx8IHRhcmdldEludGVydmFsLmVuZERhdGUgfHwgc2hvd25EYXRlIHx8IG5ldyBEYXRlKCk7XG5cbiAgLy8gaW5pdGlhbCBmb2N1c1xuICBpZiAoIWN1cnJlbnRGb2N1c2VkRGF0ZSkgcmV0dXJuIHNob3duRGF0ZSB8fCB0YXJnZXREYXRlO1xuXG4gIC8vIC8vIGp1c3QgcmV0dXJuIHRhcmdldERhdGUgZm9yIG5hdGl2ZSBzY3JvbGxlZCBjYWxlbmRhcnNcbiAgLy8gaWYgKHNjcm9sbC5lbmFibGVkKSByZXR1cm4gdGFyZ2V0RGF0ZTtcbiAgaWYgKGRpZmZlcmVuY2VJbkNhbGVuZGFyTW9udGhzKHRhcmdldEludGVydmFsLnN0YXJ0RGF0ZSwgdGFyZ2V0SW50ZXJ2YWwuZW5kRGF0ZSkgPiBtb250aHMpIHtcbiAgICAvLyBkb24ndCBjaGFuZ2UgZm9jdXNlZCBpZiBuZXcgc2VsZWN0aW9uIGluIHZpZXcgYXJlYVxuICAgIHJldHVybiBjdXJyZW50Rm9jdXNlZERhdGU7XG4gIH1cbiAgcmV0dXJuIHRhcmdldERhdGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaW5kTmV4dFJhbmdlSW5kZXgocmFuZ2VzOiBEYXRlUmFuZ2VbXSwgY3VycmVudFJhbmdlSW5kZXggPSAtMSkge1xuXG4gIGNvbnN0IG5leHRJbmRleCA9IHJhbmdlcy5maW5kSW5kZXgoXG4gICAgKHJhbmdlLCBpKSA9PiBpID4gY3VycmVudFJhbmdlSW5kZXggJiYgcmFuZ2UuYXV0b0ZvY3VzICE9PSBmYWxzZSAmJiAhcmFuZ2UuZGlzYWJsZWRcbiAgKTtcblxuICBpZiAobmV4dEluZGV4ICE9PSAtMSkgcmV0dXJuIG5leHRJbmRleDtcbiAgcmV0dXJuIHJhbmdlcy5maW5kSW5kZXgocmFuZ2UgPT4gcmFuZ2UuYXV0b0ZvY3VzICE9PSBmYWxzZSAmJiAhcmFuZ2UuZGlzYWJsZWQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TW9udGhEaXNwbGF5UmFuZ2UoZGF0ZTogRGF0ZSwgZGF0ZU9wdGlvbnM/OiBXZWVrT3B0aW9ucywgZml4ZWRIZWlnaHQ/OiBib29sZWFuKSB7XG4gIGNvbnN0IHN0YXJ0RGF0ZU9mTW9udGggPSBzdGFydE9mTW9udGgoZGF0ZSk7XG4gIGNvbnN0IGVuZERhdGVPZk1vbnRoID0gZW5kT2ZNb250aChkYXRlKTtcbiAgY29uc3Qgc3RhcnREYXRlT2ZDYWxlbmRhciA9IHN0YXJ0T2ZXZWVrKHN0YXJ0RGF0ZU9mTW9udGgsIGRhdGVPcHRpb25zKTtcbiAgbGV0IGVuZERhdGVPZkNhbGVuZGFyID0gZW5kT2ZXZWVrKGVuZERhdGVPZk1vbnRoLCBkYXRlT3B0aW9ucyk7XG4gIGlmIChmaXhlZEhlaWdodCAmJiBkaWZmZXJlbmNlSW5DYWxlbmRhckRheXMoZW5kRGF0ZU9mQ2FsZW5kYXIsIHN0YXJ0RGF0ZU9mQ2FsZW5kYXIpIDw9IDM0KSB7XG4gICAgZW5kRGF0ZU9mQ2FsZW5kYXIgPSBhZGREYXlzKGVuZERhdGVPZkNhbGVuZGFyLCA3KTtcbiAgfVxuICByZXR1cm4ge1xuICAgIHN0YXJ0OiBzdGFydERhdGVPZkNhbGVuZGFyLFxuICAgIGVuZDogZW5kRGF0ZU9mQ2FsZW5kYXIsXG4gICAgc3RhcnREYXRlT2ZNb250aCxcbiAgICBlbmREYXRlT2ZNb250aCxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlU3R5bGVzKHNvdXJjZXM6IFBhcnRpYWw8U3R5bGVzVHlwZT5bXSkge1xuICBpZiAoIXNvdXJjZXMubGVuZ3RoKSByZXR1cm4ge307XG4gIGNvbnN0IGdlbmVyYXRlZFN0eWxlcyA9IHNvdXJjZXNcbiAgICAuZmlsdGVyKHNvdXJjZSA9PiBCb29sZWFuKHNvdXJjZSkpXG4gICAgLnJlZHVjZSgoc3R5bGVzLCBzdHlsZVNvdXJjZSkgPT4ge1xuICAgICAgT2JqZWN0LmtleXMoc3R5bGVTb3VyY2UpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgc3R5bGVzW2tleV0gPSBjbGFzc25hbWVzKHN0eWxlc1trZXldLCBzdHlsZVNvdXJjZVtrZXldKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHN0eWxlcztcbiAgICB9LCB7fSk7XG4gIHJldHVybiBnZW5lcmF0ZWRTdHlsZXM7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLElBQUFBLFdBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFFBQUEsR0FBQUQsT0FBQTtBQVNrQixTQUFBRCx1QkFBQUcsR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUlYLFNBQVNHLGFBQWFBLENBQUNDLGtCQUF3QixFQUFFQyxTQUFnQixFQUFFQyxJQUFXLEVBQUVDLE1BQWUsRUFBRUMsTUFBb0IsRUFBRUMsWUFBdUIsRUFBRUMsV0FBa0MsRUFBRTtFQUN6TDtFQUNBLElBQUlDLGNBQXlCO0VBQzdCLElBQUlELFdBQVcsS0FBSyxXQUFXLEVBQUU7SUFDL0IsTUFBTUUsS0FBSyxHQUFHSixNQUFNLENBQUNDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNyQ0UsY0FBYyxHQUFHO01BQ2ZFLFNBQVMsRUFBRUQsS0FBSyxFQUFFQyxTQUFTO01BQzNCQyxPQUFPLEVBQUVGLEtBQUssRUFBRUU7SUFDbEIsQ0FBQztFQUNILENBQUMsTUFBTTtJQUNMSCxjQUFjLEdBQUc7TUFDZkUsU0FBUyxFQUFFUCxJQUFJO01BQ2ZRLE9BQU8sRUFBRVI7SUFDWCxDQUFDO0VBQ0g7RUFDQUssY0FBYyxDQUFDRSxTQUFTLEdBQUcsSUFBQUUscUJBQVksRUFBQ0osY0FBYyxDQUFDRSxTQUFTLElBQUksSUFBSUcsSUFBSSxDQUFDLENBQUMsQ0FBQztFQUMvRUwsY0FBYyxDQUFDRyxPQUFPLEdBQUcsSUFBQUcsbUJB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